╭───────╮
│ Types │
╰───────╯
type User = {name: String}

view Main {
  ╭────────╮
  │ @State │
  ╰────────╯
  @users: User[] = []

  ╭────────╮
  │ Render │
  ╰────────╯
  override fn render(
    name: String
    onResetName: fn(): &
  ) =>
    <>
      Name: {name}
      <Button onPress=addUser(name)>Add</Button>
      <Button onPress=onResetName>Reset</Button>
    </>

  ╭──────╮
  │ &Msg │
  ╰──────╯
  fn addUser(name: String) =>
    guard(
      name.length > 0
    else:
      @error = 'Name cannot be empty'
    ):

    guard(
      @users.all(fn(u) => u.name != name)
    else:
      @error = 'User already exists'
    ):

    @users.push({ name: })
}
